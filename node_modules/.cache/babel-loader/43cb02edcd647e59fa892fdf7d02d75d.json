{"ast":null,"code":"import _slicedToArray from \"/Users/macoybayona/Documents/MyProjects/Examination/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _objectSpread from \"/Users/macoybayona/Documents/MyProjects/Examination/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\n\nvar _jsxFileName = \"/Users/macoybayona/Documents/MyProjects/Examination/src/containers/customer/index.js\",\n    _this = this,\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport { bindActionCreators } from \"redux\";\nimport { connect } from \"react-redux\";\nimport { useHistory } from \"react-router-dom\";\nimport PropTypes from \"prop-types\";\nimport { StyledButton, StyledDialog, StyledTable, StyledTextField } from \"../../components\";\nimport \"../../assets/App.css\";\nimport * as customerActions from \"../../reducers/customer/actions\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction mapStateToProps(state) {\n  return {\n    customer: state.customer\n  };\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    actions: bindActionCreators(_objectSpread({}, customerActions), dispatch)\n  };\n}\n\nfunction escapeRegExp(value) {\n  return value.replace(/[-[\\]{}()*+?.,\\\\^$|#\\s]/g, '\\\\$&');\n}\n\nfunction QuickSearchToolbar(props) {\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    align: \"right\",\n    class: \"space\",\n    children: /*#__PURE__*/_jsxDEV(StyledTextField, {\n      label: \"Search\",\n      value: props.value,\n      onChange: props.onChange,\n      variant: \"standard\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 32,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 31,\n    columnNumber: 5\n  }, this);\n}\n\n_c = QuickSearchToolbar;\nQuickSearchToolbar.propTypes = {\n  clearSearch: PropTypes.func.isRequired,\n  onChange: PropTypes.func.isRequired,\n  value: PropTypes.string.isRequired\n};\n\nvar customerListPage = function customerListPage(props) {\n  _s();\n\n  var customer = props.customer,\n      actions = props.actions;\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      customers = _useState2[0],\n      setCustomers = _useState2[1];\n\n  var _React$useState = React.useState(false),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      open = _React$useState2[0],\n      setOpen = _React$useState2[1];\n\n  var _React$useState3 = React.useState(),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      id = _React$useState4[0],\n      setId = _React$useState4[1];\n\n  var history = useHistory();\n  useEffect(function () {\n    if (customer.form.isFetching) {\n      actions.getCustomers();\n    }\n  });\n  useEffect(function () {\n    setCustomers(customer.form.fields.data);\n  }, [customer.form.fields.data]);\n\n  var eventAdd = function eventAdd() {\n    history.push(\"/form/add\");\n  };\n\n  var handleEdit = function handleEdit(id) {\n    history.push(\"/form/update/\" + id);\n  };\n\n  var columns = [{\n    field: 'fullName',\n    headerName: 'Full name',\n    width: 250,\n    valueGetter: function valueGetter(params) {\n      return \"\".concat(params.getValue(params.id, 'last_name') || '', \", \").concat(params.getValue(params.id, 'first_name') || '');\n    }\n  }, {\n    field: 'email',\n    headerName: \"E-mail\",\n    width: 250\n  }, {\n    field: 'date_of_birth',\n    headerName: \"DOB\",\n    width: 250\n  }, {\n    field: 'cust_code',\n    headerName: \"CustCode\",\n    width: 250\n  }];\n\n  var _React$useState5 = React.useState(''),\n      _React$useState6 = _slicedToArray(_React$useState5, 2),\n      searchText = _React$useState6[0],\n      setSearchText = _React$useState6[1];\n\n  var requestSearch = function requestSearch(searchValue) {\n    setSearchText(searchValue);\n    var searchRegex = new RegExp(escapeRegExp(searchValue), 'i');\n    var filteredRows = customer.form.fields.data.filter(function (row) {\n      return Object.keys(row).some(function (field) {\n        return searchRegex.test(row[field].toString());\n      });\n    });\n    setCustomers(filteredRows);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      height: 400,\n      width: \"100%\",\n      background: '#ffffff'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      align: \"right\",\n      class: \"space\",\n      children: /*#__PURE__*/_jsxDEV(StyledButton, {\n        label: \"Add customer\",\n        onClick: function onClick() {\n          eventAdd();\n        },\n        color: \"primary\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 9\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(StyledTable, {\n      components: {\n        Toolbar: QuickSearchToolbar\n      },\n      rows: customers,\n      columns: columns,\n      pageSize: 5,\n      rowsPerPageOptions: 5,\n      componentsProps: {\n        toolbar: {\n          value: searchText,\n          onChange: function onChange(event) {\n            return requestSearch(event.target.value);\n          },\n          clearSearch: function clearSearch() {\n            return requestSearch('');\n          }\n        }\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 7\n    }, _this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 112,\n    columnNumber: 5\n  }, _this);\n};\n\n_s(customerListPage, \"eReIhs7HKJn/P2BvWFxxSLWgP/Y=\", false, function () {\n  return [useHistory];\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(customerListPage);\n\nvar _c;\n\n$RefreshReg$(_c, \"QuickSearchToolbar\");","map":{"version":3,"sources":["/Users/macoybayona/Documents/MyProjects/Examination/src/containers/customer/index.js"],"names":["React","useState","useEffect","bindActionCreators","connect","useHistory","PropTypes","StyledButton","StyledDialog","StyledTable","StyledTextField","customerActions","mapStateToProps","state","customer","mapDispatchToProps","dispatch","actions","escapeRegExp","value","replace","QuickSearchToolbar","props","onChange","propTypes","clearSearch","func","isRequired","string","customerListPage","customers","setCustomers","open","setOpen","id","setId","history","form","isFetching","getCustomers","fields","data","eventAdd","push","handleEdit","columns","field","headerName","width","valueGetter","params","getValue","searchText","setSearchText","requestSearch","searchValue","searchRegex","RegExp","filteredRows","filter","row","Object","keys","some","test","toString","height","background","Toolbar","toolbar","event","target"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { bindActionCreators } from \"redux\";\nimport { connect } from \"react-redux\";\nimport { useHistory } from \"react-router-dom\";\nimport PropTypes from \"prop-types\";\nimport { StyledButton, StyledDialog, StyledTable, StyledTextField } from \"../../components\";\nimport \"../../assets/App.css\";\n\n\n\nimport * as customerActions from \"../../reducers/customer/actions\";\n\nfunction mapStateToProps(state) {\n  return {\n    customer: state.customer\n  };\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    actions: bindActionCreators({ ...customerActions }, dispatch)\n  };\n}\n\nfunction escapeRegExp(value) {\n  return value.replace(/[-[\\]{}()*+?.,\\\\^$|#\\s]/g, '\\\\$&');\n}\n\nfunction QuickSearchToolbar(props) {\n  return (\n    <div align=\"right\" class=\"space\" >\n      <StyledTextField\n        label=\"Search\"\n        value={props.value}\n        onChange={props.onChange}\n        variant=\"standard\"\n      />\n    </div>\n  );\n}\n\nQuickSearchToolbar.propTypes = {\n  clearSearch: PropTypes.func.isRequired,\n  onChange: PropTypes.func.isRequired,\n  value: PropTypes.string.isRequired,\n};\n\n\n\nconst customerListPage = (props) => {\n  const { customer, actions } = props;\n  const [customers, setCustomers] = useState([]);\n  const [open, setOpen] = React.useState(false);\n  const [id, setId] = React.useState();\n  const history = useHistory();\n\n\n  useEffect(() => {\n    if(customer.form.isFetching){\n      actions.getCustomers();\n    }\n  });\n\n\n  useEffect(() => {\n    setCustomers(customer.form.fields.data);\n  }, [customer.form.fields.data]);\n\n\n  const eventAdd = () => {\n    history.push(\"/form/add\");\n  };\n\n\n  const handleEdit = (id) => {\n    history.push(\"/form/update/\" + id);\n  };\n\n\n\n  const columns = [\n    {\n    field: 'fullName',\n    headerName: 'Full name',\n    width: 250,\n    valueGetter: (params) =>\n      `${params.getValue(params.id, 'last_name') || ''}, ${\n        params.getValue(params.id, 'first_name') || ''\n      }`,\n    },\n    { field: 'email', headerName: \"E-mail\", width: 250 },\n    { field: 'date_of_birth', headerName: \"DOB\", width: 250 },\n    { field: 'cust_code', headerName: \"CustCode\", width: 250 }\n  ];\n\n\nconst [searchText, setSearchText] = React.useState('');\n\nconst requestSearch = (searchValue) => {\n  setSearchText(searchValue);\n  const searchRegex = new RegExp(escapeRegExp(searchValue), 'i');\n  const filteredRows = customer.form.fields.data.filter((row) => {\n    return Object.keys(row).some((field) => {\n      return searchRegex.test(row[field].toString());\n    });\n  });\n  setCustomers(filteredRows);\n};\n\n\n  return (\n    <div style={{ height: 400, width: \"100%\", background:'#ffffff' }}>\n\n      <div align=\"right\" class=\"space\">\n        <StyledButton\n          label=\"Add customer\"\n          onClick={() => {\n            eventAdd();\n          }}\n          color=\"primary\"\n        />\n      </div>\n\n\n      <StyledTable\n        components={{ Toolbar: QuickSearchToolbar }}\n        rows={customers}\n        columns={columns}\n        pageSize={5}\n        rowsPerPageOptions={5}\n        componentsProps={{\n         toolbar: {\n           value: searchText,\n           onChange: (event) => requestSearch(event.target.value),\n           clearSearch: () => requestSearch(''),\n         },\n       }}\n      />\n\n    </div>\n  );\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(customerListPage);\n"]},"metadata":{},"sourceType":"module"}